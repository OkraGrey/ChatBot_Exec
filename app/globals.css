@import "tailwindcss";

/*
  Global CSS variables define the colour palette for the entire application. The
  values below come directly from the user's specification: a bright royal
  blue (#0044FF) and a soft yellow (#E7E697). Dark mode definitions are still
  present but use the same colours because night mode has been disabled in the
  application. The --accent-color variable is used for loaders and other
  interactive accents.
*/
:root {
  --background: #0044ff;
  --foreground: #e7e697;
  --accent-color: #0044ff;
  color-scheme: light;
}

/* Even if dark mode is selected on the system or via ChatKit, the colours
   remain identical. This prevents any automatic shift to night mode. */
:root[data-color-scheme="dark"] {
  --background: #0044ff;
  --foreground: #e7e697;
  --accent-color: #0044ff;
  color-scheme: light;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: Arial, Helvetica, sans-serif;
  --font-mono: SFMono-Regular, Consolas, "Liberation Mono", monospace;
}

/* Hide verbose tool outputs and chain‑of‑thought sections inside ChatKit.
   ChatKit sometimes renders intermediate reasoning steps and tool call details
   as <pre> blocks or inside expandable <details> elements. These styles
   suppress those elements to keep the interface clean and only show the final
   assistant responses. */
openai-chatkit pre,
openai-chatkit details {
  display: none !important;
}

/* Style ChatKit's built‑in typing indicator dots.  ChatKit renders a
   transparent/grey loader consisting of three spans.  These rules attempt to
   target those spans and set their background to the accent colour.  Since
   ChatKit's internal class names may change, multiple selectors are used for
   robustness. */
/* Style ChatKit's default loading spinner.  The widget renders a loading
   animation using inline SVGs and/or elements with role="status".  By
   setting colour properties on all SVG elements inside the shadow host,
   we ensure the spinner adopts the accent colour.  This may also affect
   other icons rendered by ChatKit, but conforms to the overall brand. */
openai-chatkit svg {
  color: var(--accent-color) !important;
  fill: var(--accent-color) !important;
  stroke: var(--accent-color) !important;
}

/* Hide ChatKit's built‑in typing indicator so we can replace it with our own
   coloured loader.  ChatKit assigns a `data-qa="typing-indicator"` attribute
   to its indicator container and sometimes uses the `.oai-typing` class on
   descendants.  We hide both to prevent the grey loader from appearing. */
openai-chatkit [data-qa="typing-indicator"],
openai-chatkit .oai-typing {
  display: none !important;
}

/* Custom three‑dot loader animation.  These styles reintroduce a pulsing
   indicator that uses the brand's accent colour.  Each dot grows and fades
   at staggered intervals to simulate typing. */
@keyframes chat-dot {
  0%, 80%, 100% {
    opacity: 0.3;
    transform: translateY(0);
  }
  40% {
    opacity: 1;
    transform: translateY(-6px);
  }
}

.chat-dot {
  width: 8px;
  height: 8px;
  background-color: var(--accent-color);
  border-radius: 50%;
  animation: chat-dot 1.4s infinite both;
}

.chat-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.chat-dot:nth-child(2) {
  animation-delay: -0.16s;
}

.chat-dot:nth-child(3) {
  animation-delay: 0s;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
}

/* Animated border loader for chat panel during response generation.
   Creates a glowing blue border on all 4 sides that pulses smoothly. */
@keyframes border-pulse {
  0%, 100% {
    opacity: 0.6;
    box-shadow: 0 0 0 2px var(--accent-color),
                0 0 8px var(--accent-color);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 0 2px var(--accent-color),
                0 0 16px var(--accent-color),
                0 0 24px rgba(0, 68, 255, 0.4);
  }
}

.chat-loading-border {
  position: relative;
  padding: 0;
  border-radius: 1rem;
}

.chat-loading-border::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: var(--accent-color);
  animation: border-pulse 2s ease-in-out infinite;
  pointer-events: none;
  z-index: 0;
}
